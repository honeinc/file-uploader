!function t(e,n,i){function r(s,l){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e){"use strict";function n(){r(this),this.el=document.createElement("div"),this.state={view:0},this.plugins={},this.defaults={plugin:"upload",closeOnUpload:!0},setTimeout(this._init.bind(this),0)}var i=t("merge"),r=t("event-emitter"),o=t("./src/upload-event"),s=(t("./src/utils"),t("./src/plugins/upload"));n.prototype={get pluginList(){var t=Object.keys(this.plugins);return t.map(n.mapPlugins(this.plugins)).filter(n.pluginVisible).map(n.pluginListEl)}},n.prototype.open=function(t){t=t||{};var e=this.defaults.plugin,n=t.plugin||e,i=this.plugins[n]||this.plugins[e];return t.plugin=n,this.currentPlugin=i,this.listEl.innerHTML="",this.pluginList.forEach(this.listEl.appendChild.bind(this.listEl)),this.el.classList.add("show"),this.state.view=1,i?(i.open(t.meta||{},this,this._handlePluginOpen.bind(this,t)),void this.emit("open",i)):void this.emit("error",new Error("No Plugin is found with the name "+n))},n.prototype.close=function(){this.el.classList.remove("show"),this.state.view=0,this.contentEl.innerHTML="",this.currentPlugin&&"function"==typeof this.currentPlugin.teardown&&(this.currentPlugin.teardown(),this.currentPlugin=null),this.emit("close")},n.prototype.upload=function(t){if("object"!=typeof t.files)return void this.emit("error",new Error("target passed to FileUploader::upload does not have files array"));if("function"!=typeof this.uploadFn)return void this.emit("error",new Error("No upload function added using FileUploader::useToUpload"));var e={},n=this.close.bind(this),i=this.uploadFn,r=this.defaults.closeOnUpload,s=this.emit.bind(this,"error");e.files=t.files,e.originalEvent=t,e.done=this.emit.bind(this,"done"),e.error=s,new o(e,function(t,o){return t?void s(t):(i(o||e),r?void n():void 0)})},n.prototype.addPlugin=function(t,e){var r=i(!0,{},t||{});return e=e||{},n.isPlugin(t)?(this.plugins[r.attributes.name]=r,r.isAdded=!0,r):(r.isAdded=!1,r)},n.prototype.useToUpload=function(t){return"function"==typeof t?void(this.uploadFn=t):void this.emit("error",new Error("useToUpload needs to be passed a function as the first parameter, "+typeof t+" given."))},n.isPlugin=function(t){return t&&"object"==typeof t?"function"!=typeof t.open||"function"!=typeof t.teardown?!1:t.attributes?"string"!=typeof t.attributes.name?!1:!0:!1:!1},n.pluginVisible=function(t){return!t.attributes.hide},n.mapPlugins=function(t){return function(e){return t[e]}},n.pluginListEl=function(t){var e=document.createElement("li"),n=document.createElement("span");return n.innerText=t.attributes.name,e.appendChild(n),e},n.prototype._init=function(){var t=document.createElement.bind(document,"div");this.tableEl=t(),this.cellEl=t(),this.modalEl=t(),this.contentEl=t(),this.listEl=document.createElement("ul"),this.el.classList.add("FileUploader-modal-overlay"),this.tableEl.classList.add("FileUploader-modal-table"),this.cellEl.classList.add("FileUploader-modal-cell"),this.modalEl.classList.add("FileUploader-modal"),this.contentEl.classList.add("FileUploader-modal-content"),this.listEl.classList.add("FileUploader-modal-list"),this.el.appendChild(this.tableEl),this.tableEl.appendChild(this.cellEl),this.cellEl.appendChild(this.modalEl),this.modalEl.appendChild(this.listEl),this.modalEl.appendChild(this.contentEl),this.addPlugin(s)},n.prototype._handlePluginOpen=function(t,e,n){var r=this.defaults.plugin,o=this.open.bind(this,i(t,{plugin:r}));return e?(this.emit("error",e),void(t.plugin!==r&&o())):"string"==typeof n?void(this.contentEl.innerHTML=n):"object"==typeof n&&n.tagName?(this.contentEl.innerHTML="",void this.contentEl.appendChild(n)):void o()},e.exports=new n,e.exports.FileUploader=n,e.exports.UploadEvent=o,e.exports.imageToBlob=t("image-to-blob")},{"./src/plugins/upload":20,"./src/upload-event":21,"./src/utils":22,"event-emitter":2,"image-to-blob":17,merge:19}],2:[function(t,e,n){"use strict";var i,r,o,s,l,a,u,c=t("d"),p=t("es5-ext/object/valid-callable"),d=Function.prototype.apply,f=Function.prototype.call,h=Object.create,m=Object.defineProperty,g=Object.defineProperties,v=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};i=function(t,e){var n;return p(e),v.call(this,"__ee__")?n=this.__ee__:(n=b.value=h(null),m(this,"__ee__",b),b.value=null),n[t]?"object"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},r=function(t,e){var n,r;return p(e),r=this,i.call(this,t,n=function(){o.call(r,t,n),d.call(e,this,arguments)}),n.__eeOnceListener__=e,this},o=function(t,e){var n,i,r,o;if(p(e),!v.call(this,"__ee__"))return this;if(n=this.__ee__,!n[t])return this;if(i=n[t],"object"==typeof i)for(o=0;r=i[o];++o)(r===e||r.__eeOnceListener__===e)&&(2===i.length?n[t]=i[o?0:1]:i.splice(o,1));else(i===e||i.__eeOnceListener__===e)&&delete n[t];return this},s=function(t){var e,n,i,r,o;if(v.call(this,"__ee__")&&(r=this.__ee__[t]))if("object"==typeof r){for(n=arguments.length,o=new Array(n-1),e=1;n>e;++e)o[e-1]=arguments[e];for(r=r.slice(),e=0;i=r[e];++e)d.call(i,this,o)}else switch(arguments.length){case 1:f.call(r,this);break;case 2:f.call(r,this,arguments[1]);break;case 3:f.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),e=1;n>e;++e)o[e-1]=arguments[e];d.call(r,this,o)}},l={on:i,once:r,off:o,emit:s},a={on:c(i),once:c(r),off:c(o),emit:c(s)},u=g({},a),e.exports=n=function(t){return null==t?h(u):g(Object(t),a)},n.methods=l},{d:3,"es5-ext/object/valid-callable":12}],3:[function(t,e){"use strict";var n,i=t("es5-ext/object/assign"),r=t("es5-ext/object/normalize-options"),o=t("es5-ext/object/is-callable"),s=t("es5-ext/string/#/contains");n=e.exports=function(t,e){var n,o,l,a,u;return arguments.length<2||"string"!=typeof t?(a=e,e=t,t=null):a=arguments[2],null==t?(n=l=!0,o=!1):(n=s.call(t,"c"),o=s.call(t,"e"),l=s.call(t,"w")),u={value:e,configurable:n,enumerable:o,writable:l},a?i(r(a),u):u},n.gs=function(t,e,n){var l,a,u,c;return"string"!=typeof t?(u=n,n=e,e=t,t=null):u=arguments[3],null==e?e=void 0:o(e)?null==n?n=void 0:o(n)||(u=n,n=void 0):(u=e,e=n=void 0),null==t?(l=!0,a=!1):(l=s.call(t,"c"),a=s.call(t,"e")),c={get:e,set:n,configurable:l,enumerable:a},u?i(r(u),c):c}},{"es5-ext/object/assign":4,"es5-ext/object/is-callable":7,"es5-ext/object/normalize-options":11,"es5-ext/string/#/contains":14}],4:[function(t,e){"use strict";e.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":5,"./shim":6}],5:[function(t,e){"use strict";e.exports=function(){var t,e=Object.assign;return"function"!=typeof e?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},{}],6:[function(t,e){"use strict";var n=t("../keys"),i=t("../valid-value"),r=Math.max;e.exports=function(t,e){var o,s,l,a=r(arguments.length,2);for(t=Object(i(t)),l=function(n){try{t[n]=e[n]}catch(i){o||(o=i)}},s=1;a>s;++s)e=arguments[s],n(e).forEach(l);if(void 0!==o)throw o;return t}},{"../keys":8,"../valid-value":13}],7:[function(t,e){"use strict";e.exports=function(t){return"function"==typeof t}},{}],8:[function(t,e){"use strict";e.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":9,"./shim":10}],9:[function(t,e){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},{}],10:[function(t,e){"use strict";var n=Object.keys;e.exports=function(t){return n(null==t?t:Object(t))}},{}],11:[function(t,e){"use strict";var n,i=t("./assign"),r=Array.prototype.forEach,o=Object.create,s=Object.getPrototypeOf;n=function(t,e){var r=s(t);return i(r?n(r,e):e,t)},e.exports=function(){var t=o(null);return r.call(arguments,function(e){null!=e&&n(Object(e),t)}),t}},{"./assign":4}],12:[function(t,e){"use strict";e.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},{}],13:[function(t,e){"use strict";e.exports=function(t){if(null==t)throw new TypeError("Cannot use null or undefined");return t}},{}],14:[function(t,e){"use strict";e.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":15,"./shim":16}],15:[function(t,e){"use strict";var n="razdwatrzy";e.exports=function(){return"function"!=typeof n.contains?!1:n.contains("dwa")===!0&&n.contains("foo")===!1}},{}],16:[function(t,e){"use strict";var n=String.prototype.indexOf;e.exports=function(t){return n.call(this,t,arguments[1])>-1}},{}],17:[function(t,e){"use strict";function n(t,e,n){var a;return"function"==typeof e&&(n=e,e={}),e=e||{},t?("object"==typeof t&&"img"===t.tagName.toLowerCase()&&(a=t.src),"string"==typeof t&&(a=t),/^data:/.test(a)?void n(null,i(a)):(e.type=l[e.type]||o(a),e.src=a,e.callback=n,e.type?void s(a,e.type,r.bind(null,e)):void n(new Error("Image type is not supported")))):n(new Error("Pass in a IMG DOM node or a url as first param"))}function i(t){var e,n,i;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(e.length);for(var r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return new Blob([i],{type:n})}function r(t,e,n){return e?void t.callback(e):void t.callback(null,i(n))}function o(t){return t?l[t.split("?").shift().split(".").pop()]:null}var s=t("image-to-data-uri"),l={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml"};e.exports=n,e.exports.dataURItoBlob=i,e.exports._handleImageToURI=r,e.exports.getMimeTypeFromUrl=o},{"image-to-data-uri":18}],18:[function(t,e){e.exports=function(t,e,n){var i=document.createElement("canvas"),r=document.createElement("img");"function"==typeof e&&(n=e,e=null),e=e||"image/png",r.crossOrigin="Anonymous",r.onload=function(){var t=i.getContext("2d");i.width=r.width,i.height=r.height,t.drawImage(r,0,0),n(null,i.toDataURL(e))},r.onerror=function(){n(new Error("FailedToLoadImage"))},i.getContext?r.src=t:n(new Error("CanvasIsNotSupported"))}},{}],19:[function(t,e){!function(t){function n(t,e){if("object"!==r(t))return e;for(var i in e)t[i]="object"===r(t[i])&&"object"===r(e[i])?n(t[i],e[i]):e[i];return t}function i(t,e,i){var s=i[0],l=i.length;(t||"object"!==r(s))&&(s={});for(var a=0;l>a;++a){var u=i[a],c=r(u);if("object"===c)for(var p in u){var d=t?o.clone(u[p]):u[p];s[p]=e?n(s[p],d):d}}return s}function r(t){return{}.toString.call(t).slice(8,-1).toLowerCase()}var o=function(t){return i(t===!0,!1,arguments)},s="merge";o.recursive=function(t){return i(t===!0,!0,arguments)},o.clone=function(t){var e,n,i=t,s=r(t);if("array"===s)for(i=[],n=t.length,e=0;n>e;++e)i[e]=o.clone(t[e]);else if("object"===s){i={};for(e in t)i[e]=o.clone(t[e])}return i},t?e.exports=o:window[s]=o}("object"==typeof e&&e&&"object"==typeof e.exports&&e.exports)},{}],20:[function(t,e){function n(t,e){t.upload(e.target)}function i(t){var e=r.input,n=e.value,i={files:[{url:n}]};t.upload(i)}var r=e.exports={open:function(t,e,o){var s=document.createElement("form"),l=document.createElement("button");r.upload=document.createElement("input"),r.upload.type="file",r.input=document.createElement("input"),r.input.type="url",l.innerHTML="Submit",s.appendChild(r.upload),s.appendChild(r.input),s.appendChild(l),s.addEventListener("submit",i.bind(null,e)),r.upload.addEventListener("change",n.bind(null,e)),o(null,s)},teardown:function(){container.removeEventListener("submit"),r.upload.removeEventListener("change")},attributes:{name:"upload"}}},{}],21:[function(t,e){"use strict";function n(t,e){i(t,function(n,i){return n?e(n):(t.files=i,void e(null,t))})}function i(t,e){function n(){a++,a===l&&e(null,s)}function i(t,e){return t instanceof Blob?void n():t.url||t.data?void r(t.url||t.data,function(t,i){return t?n():(s[e]=i,void n())}):void n()}var s=o.makeArray(t.files),l=s.length,a=0;s.forEach(i)}var r=t("image-to-blob"),o=t("./utils");e.exports=n},{"./utils":22,"image-to-blob":17}],22:[function(t,e){"use strict";e.exports.makeArray=function(t){return Array.prototype.slice.call(t,0)}},{}]},{},[1]);