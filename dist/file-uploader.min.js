!function t(e,i,n){function r(s,l){if(!i[s]){if(!e[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return r(i?i:t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){"use strict";function n(){this.el=document.createElement("div"),this.listEl=document.createElement("ul"),this.contentEl=document.createElement("div"),this.state={view:0},this.plugins={},this.defaults={plugin:"upload",closeOnUpload:!0},o.call(this),this.addPlugin(a),this.addPlugin(u),setTimeout(this._init.bind(this),0)}var r=t("merge"),o=t("eventemitter2").EventEmitter2,s=t("emit-bindings"),l=t("./src/upload-event"),a=t("skoll-upload"),u=t("skoll-preview");n.prototype=Object.create(o.prototype,{pluginList:{get:function(){var t=Object.keys(this.plugins);return t.map(n.mapPlugins(this.plugins)).filter(n.pluginVisible).map(n.pluginListEl(this.currentPlugin)).reverse()}}}),n.prototype.constructor=n,n.prototype.open=function(t){t=t||{};var e=this.defaults.plugin,i=t.plugin||e,n=this.plugins[i]||this.plugins[e];return t.plugin=i,this.prevPlugin=this.currentPlugin,this.currentPlugin=n,this.meta=t.meta||{},this.listEl.innerHTML="",this.pluginList.forEach(this.listEl.appendChild.bind(this.listEl)),this.el.classList.add("show"),this.state.view=1,n?(n.open(t.meta||{},this,this._handlePluginOpen.bind(this,t)),void this.emit("open",n)):void this.emit("error",new Error("No Plugin is found with the name "+i))},n.prototype.close=function(){this.el.classList.remove("show"),this.state.view=0,this.contentEl.innerHTML="",this.currentPlugin&&"function"==typeof this.currentPlugin.teardown&&(this.currentPlugin.teardown(),this.currentPlugin=null),this.emit("close")},n.prototype.upload=function(t){if("object"!=typeof t.files)return void this.emit("error",new Error("target passed to Skoll::upload does not have files array"));if("function"!=typeof this.uploadFn)return void this.emit("error",new Error("No upload function added using Skoll::useToUpload"));var e=this.close.bind(this),i=this.uploadFn,n=this.defaults.closeOnUpload,r=this.emit.bind(this,"error");this._createEvent(t,function(t,o){return t?void r(t):(i(o),n?void e():void 0)})},n.prototype.preview=function(t){if("object"!=typeof t.files)return void this.emit("error",new Error("target passed to Skoll::upload does not have files array"));var e=this.open.bind(this),i=this.meta;this._createEvent(t,function(t,n){i.event=n,e({meta:i,plugin:"preview"})})},n.prototype.addPlugin=function(t,e){var i=r(!0,{},t||{});return e=e||{},n.isPlugin(t)?(this.plugins[i.attributes.name]=i,i.isAdded=!0,i):(i.isAdded=!1,i)},n.prototype.useToUpload=function(t){return"function"==typeof t?void(this.uploadFn=t):void this.emit("error",new Error("useToUpload needs to be passed a function as the first parameter, "+typeof t+" given."))},n.prototype._createEvent=function(t,e){var i={},n=this.emit.bind(this,"error");i.files=t.files,i.originalEvent=t,i.done=this.emit.bind(this,"done"),i.error=n,new l(i,e)},n.isPlugin=function(t){return t&&"object"==typeof t?"function"!=typeof t.open||"function"!=typeof t.teardown?!1:t.attributes?"string"!=typeof t.attributes.name?!1:!0:!1:!1},n.pluginVisible=function(t){return!t.attributes.hide},n.mapPlugins=function(t){return function(e){return t[e]}},n.pluginListEl=function(t){var e=t.attributes.name;return function(t){var i=document.createElement("li"),n=document.createElement("span"),r=t.attributes.name;return n.textContent=r,i.setAttribute("data-plugin-name",r),i.setAttribute("data-emit","skoll.plugin.open"),i.appendChild(n),r===e&&i.setAttribute("data-plugin-selected",!0),i}},n.prototype._init=function(){var t=document.createElement.bind(document,"div");this.tableEl=t(),this.cellEl=t(),this.modalEl=t(),this.closeEl=t(),this.el.classList.add("skoll-modal-overlay"),this.el.setAttribute("data-emit","skoll.close"),this.tableEl.classList.add("skoll-modal-table"),this.cellEl.classList.add("skoll-modal-cell"),this.closeEl.classList.add("skoll-modal-close"),this.closeEl.setAttribute("data-emit","skoll.close"),this.modalEl.classList.add("skoll-modal"),this.modalEl.setAttribute("data-emit","skoll.modal.stopPropagation"),this.modalEl.setAttribute("data-emit-options","allowdefault"),this.contentEl.classList.add("skoll-modal-content"),this.listEl.classList.add("skoll-modal-list"),this.el.appendChild(this.tableEl),this.tableEl.appendChild(this.cellEl),this.cellEl.appendChild(this.modalEl),this.modalEl.appendChild(this.listEl),this.modalEl.appendChild(this.closeEl),this.modalEl.appendChild(this.contentEl),s.on("skoll.close",this.close.bind(this)),s.on("skoll.plugin.open",this._onPluginOpen.bind(this))},n.prototype._onPluginOpen=function(t){var e=t.emitTarget;this.open({meta:this.meta,plugin:e.getAttribute("data-plugin-name")})},n.prototype._handlePluginOpen=function(t,e,i){var n=this.defaults.plugin,o=this.open.bind(this,r(t,{plugin:n}));return this.prevPlugin&&this.prevPlugin.teardown(),e?(this.emit("error",e),void(t.plugin!==n&&o())):"string"==typeof i?void(this.contentEl.innerHTML=i):"object"==typeof i&&i.tagName?(this.contentEl.innerHTML="",void this.contentEl.appendChild(i)):void o()},e.exports=new n,e.exports.Skoll=n,e.exports.UploadEvent=l,e.exports.imageToBlob=t("image-to-blob")},{"./src/upload-event":9,"emit-bindings":2,eventemitter2:3,"image-to-blob":4,merge:6,"skoll-preview":7,"skoll-upload":8}],2:[function(t,e,i){"use strict";function n(t,e,i,n){return t[u](c+e,i,n||!1),i}function r(t,e){if(!t||1!==t.nodeType)return!1;if(p)return p.call(t,e);for(var i=document.querySelectorAll(e,t.parentNode),n=0;n<i.length;++n)if(i[n]===t)return!0;return!1}function o(t,e,i,n){for(t=i?{parentNode:t}:t,n=n||document;(t=t.parentNode)&&t!==document;){if(r(t,e))return t;if(t===n)return}}function s(){var t=this;a.call(t),t.validators=[],t.touchMoveDelta=10,t.initialTouchPoint=null,n(document,"touchstart",t.handleEvent.bind(t)),n(document,"touchmove",t.handleEvent.bind(t)),n(document,"touchend",t.handleEvent.bind(t)),n(document,"click",t.handleEvent.bind(t)),n(document,"input",t.handleEvent.bind(t)),n(document,"submit",t.handleEvent.bind(t))}function l(t,e){var i=t.touches[0].pageX-e.x,n=t.touches[0].pageY-e.y;return Math.sqrt(i*i+n*n)}var a=t("eventemitter2").EventEmitter2,u=window.addEventListener?"addEventListener":"attachEvent",c="addEventListener"!==u?"on":"",p=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;s.prototype=Object.create(a.prototype),s.prototype.handleEvent=function(t){var e=this,i=t.touches,n=-1;switch(("number"!=typeof t.propagationStoppedAt||isNaN(t.propagationStoppedAt))&&(t.propagationStoppedAt=100),t.type){case"touchstart":e.initialTouchPoint=e.lastTouchPoint={x:i&&i.length?i[0].pageX:0,y:i&&i.length?i[0].pageY:0};break;case"touchmove":i&&i.length&&e.initialTouchPoint&&(n=l(t,e.initialTouchPoint),n>e.touchMoveDelta&&(e.initialTouchPoint=null),e.lastTouchPoint={x:i[0].pageX,y:i[0].pageY});break;case"click":case"touchend":case"input":case"submit":if("click"===t.type&&e.lastTouchPoint&&t.touches&&t.touches.length&&(n=l(t,e.lastTouchPoint),n<e.touchMoveDelta))return t.preventDefault(),void t.stopPropagation();if("touchend"===t.type&&!e.initialTouchPoint)return;for(var r="a,button,input,[data-emit]",s=t.target||t.srcElement,a=s,u=-1,c=!1;a&&t.propagationStoppedAt>u&&++u<100;)if(t.emitTarget=a,t.depth=u,a.hasAttribute("data-emit")){for(var p="INPUT"===a.tagName&&("checkbox"===a.type||"radio"===a.type),d=!0,h=0;h<e.validators.length;++h)if(!e.validators[h].call(this,a,t)){d=!1;break}if(d)if("function"!=typeof e.validate||e.validate.call(e,a)){if("FORM"===a.tagName){if("submit"!==t.type){a=o(a,r,!1,document);continue}}else if("INPUT"===a.tagName||"TEXTAREA"===a.tagName){if("submit"!==a.type&&"checkbox"!==a.type&&"radio"!==a.type&&"file"!==a.type&&"input"!==t.type){a=o(a,r,!1,document);continue}}else if("SELECT"===a.tagName&&"input"!==t.type){a=o(a,r,!1,document);continue}c|=e._emit(a,t,p),a=o(a,r,!1,document)}else a=o(a,r,!1,document);else t.preventDefault(),t.stopPropagation(),t.propagationStoppedAt=u,a=null}else{if("A"===a.tagName||"BUTTON"===a.tagName||"INPUT"===a.tagName)return;a=o(a,r,!1,document)}if(c){if(u>=100)throw new Error("Exceeded depth limit for Emit calls.")}else e.emit("unhandled",t);e.initialTouchPoint=null}},s.prototype._emit=function(t,e,i){var n,r=this,o=t.getAttribute("data-emit-options"),s={},l=t.getAttribute("data-emit-ignore");if(l&&l.length){var a=l.toLowerCase().split(" ");for(n=0;n<a.length;++n)if(e.type===a[n])return!1}if(o&&o.length){var u=o.toLowerCase().split(" ");for(n=0;n<u.length;++n)s[u[n]]=!0}i||s.allowdefault||e.preventDefault(),s.allowpropagate||(e.stopPropagation(),e.propagationStoppedAt=e.depth);var c=t.getAttribute("data-emit");if(!c)return!0;var p=c.split(",");return s.debounce?(r.timeouts=r.timeouts||{},r.timeouts[t]&&clearTimeout(r.timeouts[t]),function(){var i=t,n=p,o=e;r.timeouts[t]=setTimeout(function(){n.forEach(function(t){r.emit(t,o)}),clearTimeout(r.timeouts[i]),r.timeouts[i]=null},250)}(),!0):(p.forEach(function(t){r.emit(t,e)}),!0)},s.prototype.addValidator=function(t){for(var e=this,i=!1,n=0;n<e.validators.length;++n)if(e.validators[n]===t){i=!0;break}return i?!1:(e.validators.push(t),!0)},s.prototype.removeValidator=function(t){for(var e=this,i=!1,n=0;n<e.validators.length;++n)if(e.validators[n]===t){e.validators.splice(n,1),i=!0;break}return i},s.singleton=s.singleton||new s,s.singleton.Emit=s,e.exports=s.singleton},{eventemitter2:3}],3:[function(t,e,i){!function(t){function e(){this._events={},this._conf&&n.call(this,this._conf)}function n(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function r(t){this._events={},this.newListener=!1,n.call(this,t)}function o(t,e,i,n){if(!i)return[];var r,s,l,a,u,c,p,d=[],h=e.length,f=e[n],m=e[n+1];if(n===h&&i._listeners){if("function"==typeof i._listeners)return t&&t.push(i._listeners),[i];for(r=0,s=i._listeners.length;s>r;r++)t&&t.push(i._listeners[r]);return[i]}if("*"===f||"**"===f||i[f]){if("*"===f){for(l in i)"_listeners"!==l&&i.hasOwnProperty(l)&&(d=d.concat(o(t,e,i[l],n+1)));return d}if("**"===f){p=n+1===h||n+2===h&&"*"===m,p&&i._listeners&&(d=d.concat(o(t,e,i,h)));for(l in i)"_listeners"!==l&&i.hasOwnProperty(l)&&("*"===l||"**"===l?(i[l]._listeners&&!p&&(d=d.concat(o(t,e,i[l],h))),d=d.concat(o(t,e,i[l],n))):d=l===m?d.concat(o(t,e,i[l],n+2)):d.concat(o(t,e,i[l],n)));return d}d=d.concat(o(t,e,i[f],n+1))}if(a=i["*"],a&&o(t,e,a,n+1),u=i["**"])if(h>n){u._listeners&&o(t,e,u,h);for(l in u)"_listeners"!==l&&u.hasOwnProperty(l)&&(l===m?o(t,e,u[l],n+2):l===f?o(t,e,u[l],n+1):(c={},c[l]=u[l],o(t,e,{"**":c},n+1)))}else u._listeners?o(t,e,u,h):u["*"]&&u["*"]._listeners&&o(t,e,u["*"],h);return d}function s(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var i=0,n=t.length;n>i+1;i++)if("**"===t[i]&&"**"===t[i+1])return;for(var r=this.listenerTree,o=t.shift();o;){if(r[o]||(r[o]={}),r=r[o],0===t.length){if(r._listeners){if("function"==typeof r._listeners)r._listeners=[r._listeners,e];else if(l(r._listeners)&&(r._listeners.push(e),!r._listeners.warned)){var s=a;"undefined"!=typeof this._events.maxListeners&&(s=this._events.maxListeners),s>0&&r._listeners.length>s&&(r._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",r._listeners.length),console.trace())}}else r._listeners=e;return!0}o=t.shift()}return!0}var l=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=10;r.prototype.delimiter=".",r.prototype.setMaxListeners=function(t){this._events||e.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},r.prototype.event="",r.prototype.once=function(t,e){return this.many(t,1,e),this},r.prototype.many=function(t,e,i){function n(){0===--e&&r.off(t,n),i.apply(this,arguments)}var r=this;if("function"!=typeof i)throw new Error("many only accepts instances of Function");return n._origin=i,this.on(t,n),r},r.prototype.emit=function(){this._events||e.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var i=arguments.length,n=new Array(i-1),r=1;i>r;r++)n[r-1]=arguments[r];for(r=0,i=this._all.length;i>r;r++)this.event=t,this._all[r].apply(this,n)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var s;if(this.wildcard){s=[];var l="string"==typeof t?t.split(this.delimiter):t.slice();o.call(this,s,l,this.listenerTree,0)}else s=this._events[t];if("function"==typeof s){if(this.event=t,1===arguments.length)s.call(this);else if(arguments.length>1)switch(arguments.length){case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(var i=arguments.length,n=new Array(i-1),r=1;i>r;r++)n[r-1]=arguments[r];s.apply(this,n)}return!0}if(s){for(var i=arguments.length,n=new Array(i-1),r=1;i>r;r++)n[r-1]=arguments[r];for(var a=s.slice(),r=0,i=a.length;i>r;r++)this.event=t,a[r].apply(this,n);return a.length>0||!!this._all}return!!this._all},r.prototype.on=function(t,i){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof i)throw new Error("on only accepts instances of Function");if(this._events||e.call(this),this.emit("newListener",t,i),this.wildcard)return s.call(this,t,i),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],i];else if(l(this._events[t])&&(this._events[t].push(i),!this._events[t].warned)){var n=a;"undefined"!=typeof this._events.maxListeners&&(n=this._events.maxListeners),n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=i;return this},r.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},r.prototype.addListener=r.prototype.on,r.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var i,n=[];if(this.wildcard){var r="string"==typeof t?t.split(this.delimiter):t.slice();n=o.call(this,null,r,this.listenerTree,0)}else{if(!this._events[t])return this;i=this._events[t],n.push({_listeners:i})}for(var s=0;s<n.length;s++){var a=n[s];if(i=a._listeners,l(i)){for(var u=-1,c=0,p=i.length;p>c;c++)if(i[c]===e||i[c].listener&&i[c].listener===e||i[c]._origin&&i[c]._origin===e){u=c;break}if(0>u)continue;return this.wildcard?a._listeners.splice(u,1):this._events[t].splice(u,1),0===i.length&&(this.wildcard?delete a._listeners:delete this._events[t]),this}(i===e||i.listener&&i.listener===e||i._origin&&i._origin===e)&&(this.wildcard?delete a._listeners:delete this._events[t])}return this},r.prototype.offAny=function(t){var e,i=0,n=0;if(t&&this._all&&this._all.length>0){for(e=this._all,i=0,n=e.length;n>i;i++)if(t===e[i])return e.splice(i,1),this}else this._all=[];return this},r.prototype.removeListener=r.prototype.off,r.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||e.call(this),this;if(this.wildcard)for(var i="string"==typeof t?t.split(this.delimiter):t.slice(),n=o.call(this,null,i,this.listenerTree,0),r=0;r<n.length;r++){var s=n[r];s._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},r.prototype.listeners=function(t){if(this.wildcard){var i=[],n="string"==typeof t?t.split(this.delimiter):t.slice();return o.call(this,i,n,this.listenerTree,0),i}return this._events||e.call(this),this._events[t]||(this._events[t]=[]),l(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},r.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof i?i.EventEmitter2=r:window.EventEmitter2=r}()},{}],4:[function(t,e,i){"use strict";function n(t,e,i){var n;return"function"==typeof e&&(i=e,e={}),e=e||{},t?("object"==typeof t&&"img"===t.tagName.toLowerCase()&&(n=t.src),"string"==typeof t&&(n=t),/^data:/.test(n)&&!e.convert?void i(null,r(n)):(e.type=a[e.type]||s(n),e.src=n,e.callback=i,e.type?void l(n,e.type,o.bind(null,e)):void i(new Error("Image type is not supported")))):i(new Error("Pass in a IMG DOM node or a url as first param"))}function r(t){var e,i,n;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(e.length);for(var r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return new Blob([n],{type:i})}function o(t,e,i){return e?void t.callback(e):void t.callback(null,r(i))}function s(t){return t?a[t.split("?").shift().split(".").pop()]:null}var l=t("image-to-data-uri"),a={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml"};e.exports=n,e.exports.dataURItoBlob=r,e.exports._handleImageToURI=o,e.exports.getMimeTypeFromUrl=s},{"image-to-data-uri":5}],5:[function(t,e,i){e.exports=function(t,e,i){var n=document.createElement("canvas"),r=document.createElement("img");"function"==typeof e&&(i=e,e=null),e=e||"image/png",r.crossOrigin="Anonymous",r.onload=function(){var t=n.getContext("2d");n.width=r.width,n.height=r.height,t.drawImage(r,0,0),i(null,n.toDataURL(e))},r.onerror=function(){i(new Error("FailedToLoadImage"))},n.getContext?r.src=t:i(new Error("CanvasIsNotSupported"))}},{}],6:[function(t,e,i){!function(t){function i(t,e){if("object"!==r(t))return e;for(var n in e)"object"===r(t[n])&&"object"===r(e[n])?t[n]=i(t[n],e[n]):t[n]=e[n];return t}function n(t,e,n){var s=n[0],l=n.length;(t||"object"!==r(s))&&(s={});for(var a=0;l>a;++a){var u=n[a],c=r(u);if("object"===c)for(var p in u){var d=t?o.clone(u[p]):u[p];e?s[p]=i(s[p],d):s[p]=d}}return s}function r(t){return{}.toString.call(t).slice(8,-1).toLowerCase()}var o=function(t){return n(t===!0,!1,arguments)},s="merge";o.recursive=function(t){return n(t===!0,!0,arguments)},o.clone=function(t){var e,i,n=t,s=r(t);if("array"===s)for(n=[],i=t.length,e=0;i>e;++e)n[e]=o.clone(t[e]);else if("object"===s){n={};for(e in t)n[e]=o.clone(t[e])}return n},t?e.exports=o:window[s]=o}("object"==typeof e&&e&&"object"==typeof e.exports&&e.exports)},{}],7:[function(t,e,i){function n(t){this.attributes=t}function r(t){return function(e){var i=document.createElement("div");i.classList.add("skoll-preview-image"),i.setAttribute("style","background-image: url("+e+");"),t.appendChild(i)}}function o(t){return"string"!=typeof t.url}function s(t,e){var i=new FileReader;i.onload=function(){e(null,i.result)},i.onerror=function(t){e(t)},i.readAsDataURL(t)}var l=t("emit-bindings"),a={name:"preview",hide:!0};n.prototype={open:function(t,e,i){function n(n,r){var o;u++,!n&&r&&p.push(r),u===a&&(c(p,i),o=Object.create({meta:t}),"object"==typeof e.prevPlugin&&(o.plugin=e.prevPlugin.attributes.name),l.on("skoll.preview.cancel",e.open.bind(e,o)),l.on("skoll.preview.use",e.upload.bind(e,t.event)))}var r=t.event.files.filter(o),a=r.length,u=0,c=this.render.bind(this),p=[];return a?void r.forEach(function(t){s(t,n)}):(i(null,""),void e.upload(t.event))},teardown:function(){l.removeAllListeners("skoll.preview.cancel"),l.removeAllListeners("skoll.preview.use")},render:function(t,e){var i=document.createElement("div"),n=document.createElement("button"),o=document.createElement("button"),s=document.createElement("div"),l=document.createElement("div");if(i.classList.add("skoll-preview-wrapper"),s.classList.add("skoll-preview-images"),l.classList.add("skoll-preview-buttons"),n.textContent="Use",n.setAttribute("data-emit","skoll.preview.use"),n.classList.add("skoll-button"),o.textContent="Cancel",o.setAttribute("data-emit","skoll.preview.cancel"),o.classList.add("skoll-button"),1===t.length){var a=document.createElement("img");a.src=t[0],a.classList.add("skoll-preview-image-large"),s.appendChild(a)}else t.forEach(r(s));i.appendChild(s),i.appendChild(l),l.appendChild(o),l.appendChild(n),e(null,i)}},e.exports=new n(a),e.exports.Plugin=n},{"emit-bindings":2}],8:[function(t,e,i){function n(t){this.attributes=t}var r=t("emit-bindings");n.prototype={open:function(t,e,i){this.skoll=e,r.on("skoll.upload.submit",this.onSubmit.bind(this)),r.on("skoll.upload.trigger",this.onTrigger.bind(this)),this.render(t,i)},teardown:function(){this.upload=null,this.input=null,this.container=null,this.skoll=null,r.removeAllListeners("skoll.upload.submit"),r.removeAllListeners("skoll.upload.trigger")},onSubmit:function(t){t.preventDefault();var e=this.input,i=e.value,n={files:[{url:i}]};this.skoll.preview(n)},onChange:function(t){this.skoll.preview(t.target)},onTrigger:function(t){this.upload.dispatchEvent(new MouseEvent("click"))},attachListeners:function(){function t(){clearTimeout(n),r.contains("skoll-upload-drag-over")||r.add("skoll-upload-drag-over")}function e(){r.remove("skoll-upload-drag-over"),r.remove("skoll-upload-show")}function i(){r.remove("skoll-upload-show")||r.add("skoll-upload-show")}var n,r=this.dropzone.classList;this.dropzone.addEventListener("dragover",t),this.dropzone.addEventListener("dragleave",e),this.dropzone.addEventListener("drop",e),this.skoll.el.removeEventListener("dragover",i),this.skoll.el.addEventListener("dragover",i),this.upload.addEventListener("change",this.onChange.bind(this))},render:function(t,e){var i='<div class="skoll-upload-url"><button class="skoll-button" data-emit="skoll.upload.trigger">Upload A File</button></div><hr><form class="skoll-upload-form" data-emit="skoll.upload.submit"><p>Use an URL:</p><input type="url" /><button class="skoll-button">Submit</button></form><div class="skoll-upload-dropzone"><p>Drop you images here!</p><input class="skoll-upload-input" type="file" /></div>';this.el=document.createElement("div"),this.el.classList.add("skoll-upload-plugin"),this.el.innerHTML=i,this.dropzone=this.el.getElementsByClassName("skoll-upload-dropzone")[0],this.upload=this.dropzone.getElementsByClassName("skoll-upload-input")[0],this.input=this.el.querySelector(".skoll-upload-form input"),t.multiple&&this.upload.setAttribute("multiple",!0),t.url&&(this.input.value=t.url),this.attachListeners(),e(null,this.el)}},e.exports=new n({name:"upload"})},{"emit-bindings":2}],9:[function(t,e,i){"use strict";function n(t,e){r(t,function(i,n){return i?e(i):(t.files=n,void e(null,t))})}function r(t,e){function i(){a++,a===l&&e(null,r)}function n(t,e){return t instanceof Blob?void i():t.url||t.data?void o(t.url||t.data,function(t,n){return t?i():(r[e]=n,void i())}):void i()}var r=s.makeArray(t.files),l=r.length,a=0;r.forEach(n)}var o=t("image-to-blob"),s=t("./utils");e.exports=n},{"./utils":10,"image-to-blob":4}],10:[function(t,e,i){"use strict";e.exports.makeArray=function(t){return Array.prototype.slice.call(t,0)}},{}]},{},[1]);